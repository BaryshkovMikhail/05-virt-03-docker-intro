# –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ –∫ –∑–∞–Ω—è—Ç–∏—é 4 ¬´–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø–æ–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Docker Compose¬ª - –ë–∞—Ä—ã—à–∫–æ–≤ –ú–∏—Ö–∞–∏–ª

## –ó–∞–¥–∞—á–∞ 1

–°—Ü–µ–Ω–∞—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ docker –∏ docker compose plugin –Ω–∞ —Å–≤–æ—é linux —Ä–∞–±–æ—á—É—é —Å—Ç–∞–Ω—Ü–∏—é –∏–ª–∏ –í–ú.
- –ï—Å–ª–∏ dockerhub –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª /etc/docker/daemon.json —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º: ```{"registry-mirrors": ["https://mirror.gcr.io", "https://daocloud.io", "https://c.163.com/", "https://registry.docker-cn.com"]}```
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π  —Å –∏–º–µ–Ω–µ–º "custom-nginx" –Ω–∞ https://hub.docker.com (–¢–û–õ–¨–ö–û –ï–°–õ–ò –£ –í–ê–° –ï–°–¢–¨ –î–û–°–¢–£–ü);
- —Å–∫–∞—á–∞–π—Ç–µ –æ–±—Ä–∞–∑ nginx:1.21.1;
- –°–æ–∑–¥–∞–π—Ç–µ Dockerfile –∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –≤ –Ω–µ–º –∑–∞–º–µ–Ω—É –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –∏–Ω–¥–µ–∫—Å-—Å—Ç—Ä–∞–Ω–∏—Ü—ã(/usr/share/nginx/html/index.html), –Ω–∞ —Ñ–∞–π–ª index.html —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I will be DevOps Engineer!</h1>
</body>
</html>
```
- –°–æ–±–µ—Ä–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –≤ —Å–≤–æ–π dockerhub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ c tag 1.0.0 (–¢–û–õ–¨–ö–û –ï–°–õ–ò –ï–°–¢–¨ –î–û–°–¢–£–ü). 
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ https://hub.docker.com/<username_repo>/custom-nginx/general .

## –†–µ—à–µ–Ω–∏–µ 1

https://hub.docker.com/repository/docker/nastya2005/my_nginx/general

## –ó–∞–¥–∞—á–∞ 2
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–∞—à –æ–±—Ä–∞–∑ custom-nginx:1.0.0 –∫–æ–º–∞–Ω–¥–æ–π docker run –≤ —Å–æ–æ—Ç–≤–µ—Ç–≤–∏–∏ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏:
- –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ "–§–ò–û-custom-nginx-t2"
- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ
- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ –ø–æ—Ä—Ç—É —Ö–æ—Å—Ç —Å–∏—Å—Ç–µ–º—ã 127.0.0.1:8080
2. –ù–µ —É–¥–∞–ª—è—è, –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ "custom-nginx-t2"
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ```date +"%d-%m-%Y %T.%N %Z" ; sleep 0.150 ; docker ps ; ss -tlpn | grep 127.0.0.1:8080  ; docker logs custom-nginx-t2 -n1 ; docker exec -it custom-nginx-t2 base64 /usr/share/nginx/html/index.html```
4. –£–±–µ–¥–∏—Ç–µ—Å—å —Å –ø–æ–º–æ—â—å—é curl –∏–ª–∏ –≤–µ–± –±—Ä–∞—É–∑–µ—Ä–∞, —á—Ç–æ –∏–Ω–¥–µ–∫—Å-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–Ω–∞.

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –≤–∏–¥–Ω–æ –≤—Å–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –≤—ã–≤–æ–¥.


## –†–µ—à–µ–Ω–∏–µ 2

1. 
```bash
docker run -d --name baryshkov-custom-nginx-t2 -p 127.0.0.1:8080:80 nastya2005/my_nginx:1.0.0
```
![img1](img/img1.png)

2.

```bash
docker rename baryshkov-custom-nginx-t2 custom-nginx-t2
```
![img2](img/img2.png)

3. 
![img3](img/img3.png)

4. 
![img4](img/img4.png)

## –ó–∞–¥–∞—á–∞ 3
1. –í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å docker help –∏–ª–∏ google, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞/–æ—à–∏–±–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ "custom-nginx-t2".
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é Ctrl-C.
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ ```docker ps -a``` –∏ –æ–±—ä—è—Å–Ω–∏—Ç–µ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –ø–æ—á–µ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è.
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
5. –ó–∞–π–¥–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ "custom-nginx-t2" —Å –æ–±–æ–ª–æ—á–∫–æ–π bash.
6. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª—é–±–∏–º—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä(vim, nano –∏—Ç–¥) —Å –ø–æ–º–æ—â—å—é apt-get.
7. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª "/etc/nginx/conf.d/default.conf", –∑–∞–º–µ–Ω–∏–≤ –ø–æ—Ä—Ç "listen 80" –Ω–∞ "listen 81".
8. –ó–∞–ø–æ–º–Ω–∏—Ç–µ(!) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É ```nginx -s reload```, –∞ –∑–∞—Ç–µ–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ```curl http://127.0.0.1:80 ; curl http://127.0.0.1:81```.
9. –í—ã–π–¥–∏—Ç–µ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–∞–±—Ä–∞–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏  ```exit``` –∏–ª–∏ Ctrl-D.
10. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥: ```ss -tlpn | grep 127.0.0.1:8080``` , ```docker port custom-nginx-t2```, ```curl http://127.0.0.1:8080```. –ö—Ä–∞—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏—Ç–µ —Å—É—Ç—å –≤–æ–∑–Ω–∏–∫—à–µ–π –ø—Ä–æ–±–ª–µ–º—ã.
11. * –≠—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É—è –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ. –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx –∏ –Ω–µ —É–¥–∞–ª—è–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–Ω–æ. [–ø—Ä–∏–º–µ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞](https://www.baeldung.com/linux/assign-port-docker-container)
12. –£–¥–∞–ª–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä "custom-nginx-t2", –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –µ–≥–æ.(–≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å --help –∏–ª–∏ google)

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –≤–∏–¥–Ω–æ –≤—Å–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –≤—ã–≤–æ–¥.

## –†–µ—à–µ–Ω–∏–µ 3

1. 2. 3. 
![img5](img/img5.png)

‚ùó –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ attach –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∫ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Å–æ–ª–∏, –∏ Ctrl+C –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (SIGINT) –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É ‚Äî nginx. –ê —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∑–∞–≤–µ—Ä—à–∏–ª—Å—è, Docker —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ —Ä–∞–±–æ—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞.

üß† –ü–æ—è—Å–Ω–µ–Ω–∏–µ:  –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—Å–ª–µ Ctrl+C, –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å (nginx) –±—ã–ª –∑–∞–≤–µ—Ä—à–µ–Ω. Docker —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–ø–æ–ª–Ω–∏–ª —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è.

4. 5. 6. 7.
![img6](img/img6.png)
![img7](img/img7.png)
![img8](img/img8.png)
8.

![img9](img/img9.png)
![img10](img/img10.png)

üî¥ –ü—Ä–æ–±–ª–µ–º–∞:  –í—ã –∏–∑–º–µ–Ω–∏–ª–∏ –ø–æ—Ä—Ç Nginx –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ 81, –Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—Å—ë –µ—â—ë –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ—Ä—Ç 80 –Ω–∞—Ä—É–∂—É (8080:80). –¢–æ –µ—Å—Ç—å: 

    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ª—É—à–∞–µ—Ç 81 , –Ω–æ
    –•–æ—Å—Ç –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç 8080 ‚Üí 80 (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) .
     

–ü–æ—ç—Ç–æ–º—É –∫–æ–º–∞–Ω–¥–∞ curl http://127.0.0.1:8080 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ç.–∫. –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∏–∫—Ç–æ –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80.

11. 
```bash
docker stop custom-nginx-t2
docker run -d --name custom-nginx-t2 -p 127.0.0.1:8080:81 nastya2005/my_nginx:1.0.0
```

12.
```bash 
docker rm -f custom-nginx-t2
```

## –ó–∞–¥–∞—á–∞ 4


- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –æ–±—Ä–∞–∑–∞ ***centos*** c –ª—é–±—ã–º —Ç–µ–≥–æ–º –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –ø–æ–¥–∫–ª—é—á–∏–≤ –ø–∞–ø–∫—É  —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ ```$(pwd)``` –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ –≤ ```/data``` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª—é—á -v.
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ –æ–±—Ä–∞–∑–∞ ***debian*** –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –ø–æ–¥–∫–ª—é—á–∏–≤ —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—á–∏–π –∫–∞—Ç–∞–ª–æ–≥ ```$(pwd)``` –≤ ```/data``` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. 
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ø–µ—Ä–≤–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É —Å –ø–æ–º–æ—â—å—é ```docker exec``` –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –ª—é–±–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –≤ ```/data```.
- –î–æ–±–∞–≤—å—Ç–µ –µ—â—ë –æ–¥–∏–Ω —Ñ–∞–π–ª –≤ —Ç–µ–∫—É—â–∏–π –∫–∞—Ç–∞–ª–æ–≥ ```$(pwd)``` –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ.
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –≤–æ –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç–µ –ª–∏—Å—Ç–∏–Ω–≥ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ ```/data``` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.


–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –≤–∏–¥–Ω–æ –≤—Å–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –≤—ã–≤–æ–¥.

## –†–µ—à–µ–Ω–∏–µ 4

```bash
docker run -d --name centos-container -v $(pwd):/data centos:centos7.9.2009 tail -f /dev/null
```

```bash
docker run -d --name debian-container -v $(pwd):/data debian tail -f /dev/null
```

```bash
docker exec -it centos-container bash
```
![img11](img/img11.png)

```bash
echo "–≠—Ç–æ —Ñ–∞–π–ª –∏–∑ CentOS" > /data/centos_file.txt
exit
```

```bash
echo "–≠—Ç–æ —Ñ–∞–π–ª —Å —Ö–æ—Å—Ç–∞" > ./host_file.txt
```

```bash
ls -la /data
cat /data/centos_file.txt
cat /data/host_file.txt
```

![img12](img/img12.png)

## –ó–∞–¥–∞—á–∞ 5

1. –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é(–Ω–∞–ø—Ä–∏–º–µ—Ä /tmp/netology/docker/task5) –∏ 2 —Ñ–∞–π–ª–∞ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.
"compose.yaml" —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```
version: "3"
services:
  portainer:
    network_mode: host
    image: portainer/portainer-ce:latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
```
"docker-compose.yaml" —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```
version: "3"
services:
  registry:
    image: registry:2

    ports:
    - "5000:5000"
```

–ò –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É "docker compose up -d". –ö–∞–∫–æ–π –∏–∑ —Ñ–∞–π–ª–æ–≤ –±—ã–ª –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ—á–µ–º—É? (–ø–æ–¥—Å–∫–∞–∑–∫–∞: https://docs.docker.com/compose/compose-application-model/#the-compose-file )

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª compose.yaml —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã –æ–±–∞ —Ñ–∞–π–ª–∞. (–ø–æ–¥—Å–∫–∞–∑–∫–∞: https://docs.docker.com/compose/compose-file/14-include/)

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤–∞—à–µ–π —Ö–æ—Å—Ç–æ–≤–æ–π –û–° –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–∞–Ω–¥—ã —á—Ç–æ–±—ã –∑–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑ custom-nginx –∫–∞–∫ custom-nginx:latest –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ –≤–∞–º–∏, –ª–æ–∫–∞–ª—å–Ω–æ–µ registry. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://distribution.github.io/distribution/about/deploying/
4. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "https://127.0.0.1:9000" –∏ –ø—Ä–æ–∏–∑–≤–µ–¥–∏—Ç–µ –Ω–∞—á–∞–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É portainer.(–ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –∞–¥–º–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
5. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "http://127.0.0.1:9000/#!/home", –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ local  –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "stacks" –∏ –≤ "web editor" –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–º–ø–æ—É–∑:

```
version: '3'

services:
  nginx:
    image: 127.0.0.1:5000/custom-nginx
    ports:
      - "9090:80"
```
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "http://127.0.0.1:9000/#!/2/docker/containers", –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å nginx –∏ –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "inspect". –í –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ <> Tree —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø–æ–ª–µ "Config" –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –æ—Ç –ø–æ–ª—è "AppArmorProfile" –¥–æ "Driver".

7. –£–¥–∞–ª–∏—Ç–µ –ª—é–±–æ–π –∏–∑ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ –∫–æ–º–ø–æ—É–∑–∞(–Ω–∞–ø—Ä–∏–º–µ—Ä compose.yaml).  –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É "docker compose up -d". –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ warning, –æ–±—ä—è—Å–Ω–∏—Ç–µ —Å—É—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –ü–æ–≥–∞—Å–∏—Ç–µ compose-–ø—Ä–æ–µ–∫—Ç –û–î–ù–û–ô(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!!) –∫–æ–º–∞–Ω–¥–æ–π.

–í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏–ª–æ–∂–∏—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∫–æ–Ω—Å–æ–ª–∏, –≥–¥–µ –≤–∏–¥–Ω–æ –≤—Å–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –≤—ã–≤–æ–¥, —Ñ–∞–π–ª compose.yaml , —Å–∫—Ä–∏–Ω—à–æ—Ç portainer c –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã–º –∫–æ–º–ø–æ—É–∑–æ–º.


## –†–µ—à–µ–Ω–∏–µ 5

![img13](img/img13.png)

‚ùì –ö–∞–∫–æ–π –∏–∑ —Ñ–∞–π–ª–æ–≤ –±—ã–ª –∑–∞–ø—É—â–µ–Ω? 

    –û—Ç–≤–µ—Ç:  compose.yaml 
     

üí° –û–±—ä—è—Å–Ω–µ–Ω–∏–µ: 

–°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Docker Compose : 

    –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker Compose –∏—â–µ—Ç —Ñ–∞–π–ª—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
        compose.yaml (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
        docker-compose.yml
        docker-compose.yaml
         
     

–§–∞–π–ª compose.yaml –∏–º–µ–µ—Ç –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç , –ø–æ—ç—Ç–æ–º—É –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

![img14](img/img14.png)

```bash
docker ps | grep registry
```

```bash 
docker tag nastya2005/my_nginx:1.0.0 localhost:5000/custom-nginx
docker push localhost:5000/custom-nginx
```
![img15](img/img15.png)
![img16](img/img16.png)
![img17](img/img17.png)
![img19](img/img18.png)
![img19](img/img19.png)
![img20](img/img20.png)